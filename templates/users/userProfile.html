{% extends 'base.html' %}

{% block content %}
<div class="container bootstrap snippets bootdey">
    <div class="row">
        <div class="profile-nav col-md-3">
            <div class="panel">
                <div class="user-heading round">
                    <a href="#">
                        {% if user.profile_picture %}
                        <img src="{{ url_for('uploaded_file', folder='users', filename=user.profile_picture) }}" alt="" width="70" height="70" class="rounded-circle me-2">
                        {% else %}
                        <img src="{{ url_for('uploaded_file', folder='users', filename='defaultuser.jpg') }}" alt="" width="70" height="70" class="rounded-circle me-2">
                        {% endif %}
                    </a>
                    <h1>{{ user.full_name() }}</h1>
                    <p>{{ user.email }}</p>
                </div>
                <div class="edit-delete-buttons mb-3 mt-3">
                    <a href="{{ url_for('user.edit_profile', user_id=user.id) }}" class="btn btn-info">Edit Profile</a>
                    <a href="{{ url_for('user.delete_profile', user_id=user.id) }}" class="btn btn-danger">Delete Account</a>
                </div>
            </div>
        </div>

        <div class="profile-info col-md-9">
            <div class="panel">
                <div class="bio-graph-heading">
                    {{ user.bio if user.bio else "No bio available." }}
                </div>
                <div class="panel-body bio-graph-info">
                    <h1>Bio Graph</h1>
                    <div class="row">
                        <div class="bio-row">
                            <p><span>First Name </span>: {{ user.firstname }}</p>
                        </div>
                        <div class="bio-row">
                            <p><span>Last Name </span>: {{ user.lastname }}</p>
                        </div>
                        <div class="bio-row">
                            <p><span>Country </span>: {{ user.country if user.country else 'Not specified' }}</p>
                        </div>
                        <div class="bio-row">
                            <p><span>Birthday</span>: {{ user.date_of_birth.strftime('%d %B %Y') if user.date_of_birth else 'Not specified' }}</p>
                        </div>
                        <div class="bio-row">
                            <p><span>Phone </span>: {{ user.phone_number if user.phone_number else 'Not available' }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="user-activity">
                <h3>User Activity</h3>
                <div class="row">
                    <!-- Orders -->
                    <div class="col-md-3">
                        <div class="panel">
                            <div class="panel-body">
                                <div class="bio-chart">
                                    <input class="knob" data-width="100" data-height="100" data-thickness=".2" 
                                           value="{{ orders_count }}" data-fgcolor="#e06b7d" data-bgcolor="#e8e8e8" />
                                </div>
                                <div class="bio-desk">
                                    <h4 class="red">Orders</h4>
                                    <p>Total Orders: {{ orders_count }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Likes -->
                    <div class="col-md-3">
                        <div class="panel">
                            <div class="panel-body">
                                <div class="bio-chart">
                                    <input class="knob" data-width="100" data-height="100" data-thickness=".2" 
                                           value="{{ likes_count }}" data-fgcolor="#4CC5CD" data-bgcolor="#e8e8e8" />
                                </div>
                                <div class="bio-desk">
                                    <h4 class="terques">Likes</h4>
                                    <p>Total Likes: {{ likes_count }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cars -->
                    <div class="col-md-3">
                        <div class="panel">
                            <div class="panel-body">
                                <div class="bio-chart">
                                    <input class="knob" data-width="100" data-height="100" data-thickness=".2" 
                                           value="{{ cars_count }}" data-fgcolor="#96be4b" data-bgcolor="#e8e8e8" />
                                </div>
                                <div class="bio-desk">
                                    <h4 class="green">Cars</h4>
                                    <p>Total Cars Owned: {{ cars_count }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Reviews -->
                    <div class="col-md-3">
                        <div class="panel">
                            <div class="panel-body">
                                <div class="bio-chart">
                                    <input class="knob" data-width="100" data-height="100" data-thickness=".2" 
                                           value="{{ reviews_count }}" data-fgcolor="#cba4db" data-bgcolor="#e8e8e8" />
                                </div>
                                <div class="bio-desk">
                                    <h4 class="purple">Reviews</h4>
                                    <p>Total Reviews: {{ reviews_count }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
