{% extends 'admin_base.html' %}

{% block title %}Edit Car{% endblock %}

{% block main_content %}
<h2>Edit Car: {{ car.model }}</h2>
<form action="{{ url_for('car.update_car', car_id=car.id) }}" method="POST" enctype="multipart/form-data">
    <div class="mb-3">
        <label for="model" class="form-label">Model</label>
        <input type="text" class="form-control" id="model" name="model" value="{{ car.model }}" required>
    </div>

    <div class="mb-3">
        <label for="year" class="form-label">Year</label>
        <input type="number" class="form-control" id="year" name="year" value="{{ car.year }}" required>
    </div>

    <div class="mb-3">
        <label for="price" class="form-label">Price</label>
        <input type="number" step="0.01" class="form-control" id="price" name="price" value="{{ car.price }}" required>
    </div>

    <div class="mb-3">
        <label for="mileage" class="form-label">Mileage</label>
        <input type="number" class="form-control" id="mileage" name="mileage" value="{{ car.mileage }}" required>
    </div>

    <div class="mb-3">
        <label for="interior_color" class="form-label">Interior Color</label>
        <input type="text" class="form-control" id="interior_color" name="interior_color" value="{{ car.interior_color }}" required>
    </div>

    <div class="mb-3">
        <label for="exterior_color" class="form-label">Exterior Color</label>
        <input type="text" class="form-control" id="exterior_color" name="exterior_color" value="{{ car.exterior_color }}" required>
    </div>

    <div class="mb-3">
        <label for="condition" class="form-label">Condition</label>
        <select class="form-select" id="condition" name="condition" required>
            <option value="new" {% if car.condition == 'new' %}selected{% endif %}>New</option>
            <option value="used" {% if car.condition == 'used' %}selected{% endif %}>Used</option>
        </select>
    </div>

    <div class="mb-3">
        <label for="transmission" class="form-label">Transmission</label>
        <select class="form-select" id="transmission" name="transmission" required>
            <option value="automatic" {% if car.transmission == 'automatic' %}selected{% endif %}>Automatic</option>
            <option value="manual" {% if car.transmission == 'manual' %}selected{% endif %}>Manual</option>
        </select>
    </div>

    <div class="mb-3">
        <label for="fuel_type" class="form-label">Fuel Type</label>
        <select class="form-select" id="fuel_type" name="fuel_type" required>
            <option value="petrol" {% if car.fuel_type == 'petrol' %}selected{% endif %}>Petrol</option>
            <option value="diesel" {% if car.fuel_type == 'diesel' %}selected{% endif %}>Diesel</option>
            <option value="electric" {% if car.fuel_type == 'electric' %}selected{% endif %}>Electric</option>
            <option value="hybrid" {% if car.fuel_type == 'hybrid' %}selected{% endif %}>Hybrid</option>
        </select>
    </div>

    <div class="mb-3">
        <label for="location" class="form-label">Location</label>
        <input type="text" class="form-control" id="location" name="location" value="{{ car.location }}" required>
    </div>

    <div class="mb-3">
        <label for="vin" class="form-label">VIN</label>
        <input type="text" class="form-control" id="vin" name="vin" value="{{ car.vin }}" required>
    </div>

    <div class="mb-3">
        <label for="warranty" class="form-label">Warranty</label>
        <input type="text" class="form-control" id="warranty" name="warranty" value="{{ car.warranty }}">
    </div>

    <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea class="form-control" id="description" name="description" rows="3">{{ car.description }}</textarea>
    </div>

    <div class="mb-3">
        <label for="stock_status" class="form-label">Stock Status</label>
        <select class="form-select" id="stock_status" name="stock_status" required>
            <option value="in_stock" {% if car.stock_status == 'in_stock' %}selected{% endif %}>In Stock</option>
            <option value="out_of_stock" {% if car.stock_status == 'out_of_stock' %}selected{% endif %}>Out of Stock</option>
        </select>
    </div>

    <div class="mb-3">
        <label for="category" class="form-label">Category</label>
        <select class="form-select" id="category" name="category" required>
            {% for category in categories %}
                <option value="{{ category.value }}" {% if car.category == category.value %}selected{% endif %}>
                    {{ category.category_name }}
                </option>
            {% endfor %}
        </select>
    </div>

    <div class="mb-3">
        <label for="images" class="form-label">Upload Images</label>
        <input type="file" class="form-control" id="images" name="images[]" multiple>
    </div>

    <button type="submit" class="btn btn-primary">Update Car</button>
</form>
{% endblock %}
